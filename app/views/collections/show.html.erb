<% content_for :title, "Коллекция | #{@collection.title}" %>

<div class="S_collectionShow">

  <!-- Заголовок с табами: посты и товары -->
  <div class="W_collectionFeedHeader">
    <button class="Q_collectionFeedToggle active posts">
      <h3>Посты <span><%= @posts.count %></span></h3>
    </button>
    <button class="Q_collectionFeedToggle passive items">
      <h3>Товары <span><%= @items.count %></span></h3>
    </button>
  </div>

  <!-- Список постов в коллекции -->
  <% if @collection.posts.any? %>
    <div class="C_profileFeedPosts compact" data-sort="new">
      <%= render partial: "collections/post_card", collection: @collection.posts, as: :post %>
    </div>
  <% else %>
    <div class="C_profileFeedPosts nodata" data-sort="new">
      <h2 class="Q_collectionEmptyMessage">У вас пока нет сохранённых постов</h2>
    </div>
  <% end %>

  <!-- Список товаров в коллекции (изначально скрыт, переключается JS'ом) -->
  <% if @collection.items.any? %>
    <div class="C_profileFeedItems" style="display: none;" data-sort="new">
      <%= render partial: "collections/item_card", collection: @collection.items, as: :item %>
    </div>
  <% else %>
    <div class="C_profileFeedItems nodata" style="display: none;" data-sort="new">
      <h2 class="Q_collectionEmptyMessage">У вас пока нет сохранённых товаров</h2>
    </div>
  <% end %>
</div>

<!-- Модалка редактирования коллекции -->
<%= render partial: "collections/form", locals: { collection: @collection } %>
